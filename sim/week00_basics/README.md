# Week 00 — cocotb Basics (Counter Demo)

A tiny example to introduce cocotb using a simple synchronous counter. It highlights why Python-based testbenches are ergonomic compared to pure Verilog TBs: coroutines, clean clock/reset helpers, rich assertions, and reuse.

## What you’ll see
- Start a clock with one line (`Clock(...).start()`).
- Coroutine-based reset and step helpers (`await RisingEdge(dut.clk)`).
- Straightforward Python assertions and small utilities.
- Short, readable tests that scale better than ad-hoc Verilog TBs.

## Files
- `rtl/counter.v`: counter module with `clk`, `rstn`, `en`, `q`.
- `tests/test_counter.py`: two short tests (`basic_counting`, `wrap_example`).
- `Makefile`: runs cocotb with Verilator (default) or Icarus.

## Run it
1) Activate the shared env (see `sim/README.md`):
- `source sim/.venv/bin/activate`

2) From repo root:
- `cd sim/week00_basics`
- Verilator: `make`
- Icarus: `make SIM=icarus`

3) Pure Verilog TB (comparison):
- Build + run: `make tb` (uses Icarus Verilog)
- Waves: `counter_tb.vcd` → `gtkwave counter_tb.vcd`

4) Open waves (if generated):
- Verilator traces are in `sim_build/` (VCD/FST depending on setup). Use `gtkwave` to view.

## Expected behavior
- After reset, `q == 0`.
- With `en=1`, `q` increments each cycle.
- With `en=0`, `q` holds steady.

## Teaching notes (why cocotb?)
- Coroutines map naturally to hardware time and events.
- Python’s standard library and ecosystem simplify stimulus generation.
- Reuse helpers (reset, tick, AXI-lite drivers later) across many DUTs.
- Assertions are just Python conditions—concise and expressive.

Note: Avoid naming local test folders `cocotb` to prevent import conflicts with the installed `cocotb` package. This example uses `tests/` and the Makefile adds it to PYTHONPATH.

## Example waveform
The following conceptual waveform shows reset (active-low), enable gating, and the counter output incrementing and holding. See also the VCD generated by the pure Verilog TB.

![Counter waveform](../../assets/week00-counter-wave.svg)
